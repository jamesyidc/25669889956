# è´¦æˆ·ç­–ç•¥çŠ¶æ€çœŸå®æ•°æ®ä¿®å¤æŠ¥å‘Š

## é—®é¢˜æè¿°

ä¹‹å‰è®¢å•è°ƒåº¦ä¸­å¿ƒçš„è´¦æˆ·ç­–ç•¥çŠ¶æ€APIè¿”å›çš„æ˜¯å‡æ•°æ®ï¼Œæ²¡æœ‰çœŸæ­£è¯»å–æ¯ä¸ªè´¦æˆ·çš„JSONLæ–‡ä»¶ã€‚

## ä¿®å¤å†…å®¹

### 1. APIé€»è¾‘ä¿®å¤

ç¡®ä¿ `/api/order-scheduler/account-strategies` ç«¯ç‚¹æ­£ç¡®è¯»å–çœŸå®æ–‡ä»¶ï¼š

- **æ–‡ä»¶æ ¼å¼1ï¼ˆæ—§æ ¼å¼ï¼Œä¸å¸¦æ—¥æœŸï¼‰**ï¼š
  - `data/okx_auto_strategy/{account_id}_top_signal_top8_short_execution.jsonl`
  - `data/okx_auto_strategy/{account_id}_top_signal_bottom8_short_execution.jsonl`
  - `data/okx_auto_strategy/{account_id}_btc_bottom_performers_execution.jsonl`
  - `data/okx_auto_strategy/{account_id}_btc_top_performers_execution.jsonl`

- **æ–‡ä»¶æ ¼å¼2ï¼ˆæ–°æ ¼å¼ï¼Œå¸¦æ—¥æœŸï¼‰**ï¼š
  - `data/okx_auto_strategy/{account_id}_bottom_signal_top8_long_execution_{YYYYMMDD}.jsonl`
  - `data/okx_auto_strategy/{account_id}_bottom_signal_bottom8_long_execution_{YYYYMMDD}.jsonl`

### 2. æ•°æ®éªŒè¯

APIç°åœ¨è¯»å–æ¯ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼Œè§£æJSONï¼Œè·å–ï¼š
- `allowed` å­—æ®µ â†’ æ˜ å°„ä¸º `enabled`
- `timestamp` æˆ– `time` å­—æ®µ â†’ æ˜ å°„ä¸º `last_update`

### 3. çœŸå®æ•°æ®éªŒè¯ç»“æœ

#### ğŸ“Š account_main (ä¸»è´¦æˆ·)

| ç­–ç•¥ | çŠ¶æ€ | æœ€åæ›´æ–°æ—¶é—´ |
|------|------|-------------|
| è§é¡¶ä¿¡å·+æ¶¨å¹…å‰8åšç©º | âœ… å¼€ | 2026-02-21T11:59:06 |
| è§é¡¶ä¿¡å·+æ¶¨å¹…å8åšç©º | âŒ å…³ | 2026-02-21T14:36:14 |
| è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| è§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| BTCè§¦å‘æ¶¨å¹…å8å(æŠ„åº•) | âœ… å¼€ | 2026-02-17T04:19:01 |
| BTCè§¦å‘æ¶¨å¹…å‰8å(è¿½æ¶¨) | âœ… å¼€ | 2026-02-18T01:58:42 |

**å¼€å¯ç­–ç•¥æ•°ï¼š3/6**

#### ğŸ“Š account_fangfang12

| ç­–ç•¥ | çŠ¶æ€ | æœ€åæ›´æ–°æ—¶é—´ |
|------|------|-------------|
| è§é¡¶ä¿¡å·+æ¶¨å¹…å‰8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§é¡¶ä¿¡å·+æ¶¨å¹…å8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| è§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| BTCè§¦å‘æ¶¨å¹…å8å(æŠ„åº•) | âœ… å¼€ | 2026-02-17T04:18:35 |
| BTCè§¦å‘æ¶¨å¹…å‰8å(è¿½æ¶¨) | âšª æœªé…ç½® | æ— è®°å½• |

**å¼€å¯ç­–ç•¥æ•°ï¼š3/6**

#### ğŸ“Š account_anchor (é”šç‚¹è´¦æˆ·)

| ç­–ç•¥ | çŠ¶æ€ | æœ€åæ›´æ–°æ—¶é—´ |
|------|------|-------------|
| è§é¡¶ä¿¡å·+æ¶¨å¹…å‰8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§é¡¶ä¿¡å·+æ¶¨å¹…å8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| è§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| BTCè§¦å‘æ¶¨å¹…å8å(æŠ„åº•) | âšª æœªé…ç½® | æ— è®°å½• |
| BTCè§¦å‘æ¶¨å¹…å‰8å(è¿½æ¶¨) | âšª æœªé…ç½® | æ— è®°å½• |

**å¼€å¯ç­–ç•¥æ•°ï¼š2/6**

#### ğŸ“Š account_poit_main (POITå­è´¦æˆ·)

| ç­–ç•¥ | çŠ¶æ€ | æœ€åæ›´æ–°æ—¶é—´ |
|------|------|-------------|
| è§é¡¶ä¿¡å·+æ¶¨å¹…å‰8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§é¡¶ä¿¡å·+æ¶¨å¹…å8åšç©º | âœ… å¼€ | 2026-02-20T15:30:23 |
| è§åº•ä¿¡å·+æ¶¨å¹…å‰8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| è§åº•ä¿¡å·+æ¶¨å¹…å8åšå¤š | âšª æœªé…ç½® | æ— è®°å½• |
| BTCè§¦å‘æ¶¨å¹…å8å(æŠ„åº•) | âœ… å¼€ | 2026-02-17T04:39:35 |
| BTCè§¦å‘æ¶¨å¹…å‰8å(è¿½æ¶¨) | âœ… å¼€ | 2026-02-18T01:56:08 |

**å¼€å¯ç­–ç•¥æ•°ï¼š4/6**

### 4. æ€»ä½“ç»Ÿè®¡

- **æ€»è´¦æˆ·æ•°**ï¼š4ä¸ª
- **æ€»ç­–ç•¥æ•°**ï¼š6ä¸ª
- **æ€»ç›‘æ§ç‚¹**ï¼š24ä¸ªï¼ˆ4è´¦æˆ· Ã— 6ç­–ç•¥ï¼‰
- **å·²å¼€å¯ç­–ç•¥**ï¼š12ä¸ª
- **å·²å…³é—­ç­–ç•¥**ï¼š1ä¸ª
- **æœªé…ç½®ç­–ç•¥**ï¼š11ä¸ª
- **å¹³å‡å¼€å¯ç‡**ï¼š50%ï¼ˆ12/24ï¼‰

### 5. APIæµ‹è¯•å‘½ä»¤

```bash
# æµ‹è¯•APIè¿”å›
curl -s http://localhost:9002/api/order-scheduler/account-strategies | jq

# æŸ¥çœ‹ç‰¹å®šè´¦æˆ·
curl -s http://localhost:9002/api/order-scheduler/account-strategies | jq '.accounts[0]'

# ç»Ÿè®¡å¼€å¯çš„ç­–ç•¥
curl -s http://localhost:9002/api/order-scheduler/account-strategies | \
  jq '[.accounts[].strategies[] | select(.enabled == true)] | length'
```

### 6. å‰ç«¯æ˜¾ç¤º

è®¢å•è°ƒåº¦ä¸­å¿ƒé¡µé¢ï¼šhttps://9002-iopxcqas7abbrajoi4k4x-2e77fc33.sandbox.novita.ai/order-scheduler

**æ˜¾ç¤ºå†…å®¹**ï¼š
- 4è¡Œè´¦æˆ·ä¿¡æ¯
- æ¯è¡Œæ˜¾ç¤º6ä¸ªç­–ç•¥çš„å¼€å…³çŠ¶æ€
- âœ… ç»¿è‰² = å¼€å¯
- âŒ çº¢è‰² = å…³é—­
- âšª ç°è‰² = æœªé…ç½®
- æ˜¾ç¤ºæœ€åæ›´æ–°æ—¶é—´

## æŠ€æœ¯ç»†èŠ‚

### æ–‡ä»¶è¯»å–é€»è¾‘

```python
# 1. å°è¯•è¯»å–ä¸å¸¦æ—¥æœŸçš„æ–‡ä»¶ï¼ˆæ—§æ ¼å¼ï¼‰
file_path = f"data/okx_auto_strategy/{account_id}_{pattern}_execution.jsonl"
if os.path.exists(file_path):
    with open(file_path, 'r') as f:
        record = json.loads(f.readline().strip())
        enabled = record.get('allowed', False)
        last_update = record.get('timestamp') or record.get('time')

# 2. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œå°è¯•è¯»å–å¸¦æ—¥æœŸçš„æ–‡ä»¶ï¼ˆæ–°æ ¼å¼ï¼Œæœ€è¿‘3å¤©ï¼‰
for days_ago in range(3):
    date_str = (datetime.now() - timedelta(days=days_ago)).strftime('%Y%m%d')
    file_path = f"data/okx_auto_strategy/{account_id}_{pattern}_execution_{date_str}.jsonl"
    if os.path.exists(file_path):
        # åŒæ ·çš„è¯»å–é€»è¾‘
```

### JSONLæ–‡ä»¶ç»“æ„ç¤ºä¾‹

```json
{
  "timestamp": "2026-02-21T11:59:06.232170",
  "time": "2026-02-21 11:59:06",
  "account_id": "account_main",
  "strategy_type": "top8_short",
  "allowed": true,
  "reason": "å¼€å¯è§é¡¶ä¿¡å·+æ¶¨å¹…å‰8åšç©ºç›‘æ§ï¼ŒRSIé˜ˆå€¼1800",
  "rsi_value": 1800,
  "sentiment": "--"
}
```

## éƒ¨ç½²ä¿¡æ¯

- **æäº¤å“ˆå¸Œ**ï¼š9f3b784
- **åˆ†æ”¯**ï¼šgenspark_ai_developer
- **PR**ï¼š#2 (https://github.com/jamesyidc/25669889956/pull/2)
- **ä¿®æ”¹æ–‡ä»¶**ï¼š
  - app.py (ä¿®å¤APIé€»è¾‘)
  - data/coin_change_tracker/baseline_20260222.json (æ–°å¢)
  - data/new_high_low/coin_highs_lows_state.json (æ›´æ–°)

## éªŒè¯æ¸…å•

- [x] APIè¿”å›çœŸå®æ•°æ®ï¼ˆä»JSONLæ–‡ä»¶è¯»å–ï¼‰
- [x] æ”¯æŒå¸¦æ—¥æœŸå’Œä¸å¸¦æ—¥æœŸä¸¤ç§æ–‡ä»¶æ ¼å¼
- [x] æ­£ç¡®å¤„ç†æœªé…ç½®çš„ç­–ç•¥
- [x] 4ä¸ªè´¦æˆ·å…¨éƒ¨éªŒè¯é€šè¿‡
- [x] 6ä¸ªç­–ç•¥çŠ¶æ€å…¨éƒ¨æ­£ç¡®
- [x] å‰ç«¯é¡µé¢æ­£å¸¸æ˜¾ç¤º
- [x] ä»£ç å·²æäº¤åˆ°Git
- [x] ä»£ç å·²æ¨é€åˆ°è¿œç¨‹ä»“åº“
- [x] PRå·²æ›´æ–°

## å®Œæˆæ—¶é—´

2026-02-22 00:45 UTC

---

**æ³¨æ„**ï¼šæ‰€æœ‰æ•°æ®å‡ä»çœŸå®çš„JSONLæ–‡ä»¶è¯»å–ï¼Œç¡®ä¿è®¢å•è°ƒåº¦ä¸­å¿ƒæ˜¾ç¤ºçš„æ˜¯ç³»ç»Ÿçš„çœŸå®è¿è¡ŒçŠ¶æ€ã€‚
